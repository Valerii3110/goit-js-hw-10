{"version":3,"file":"commonHelpers3.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport errorSvg from '../img/error.svg';\n\nconst startButton = document.querySelector('button');\nconst datetimePicker = document.getElementById('datetime-picker');\nconst timeValuesArray = document.getElementsByClassName('value');\n\nlet userSelectedDate = null;\nlet countdownInterval = null;\n\n// iziToast error message config\nconst toastErrorConfig = {\n  timeout: 5000,\n  title: 'Error',\n  message: 'Please choose a date in the future',\n  titleColor: '#fff',\n  messageColor: '#fff',\n  backgroundColor: '#EF4040',\n  progressBarColor: '#B51B1B',\n  iconUrl: errorSvg,\n  position: 'topRight',\n  titleSize: '16',\n  titleLineHeight: '24',\n  messageSize: '16',\n  messageLineHeight: '24',\n};\n\n// Initialize Flatpickr\nflatpickr(datetimePicker, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose([selectedDate]) {\n    const ms = selectedDate.getTime() - Date.now();\n    if (ms > 1000) {\n      userSelectedDate = selectedDate;\n      startButton.disabled = false;\n    } else {\n      startButton.disabled = true;\n      iziToast.error(toastErrorConfig);\n    }\n  },\n});\n\nstartButton.addEventListener('click', onStartCountdown);\n\nfunction onStartCountdown() {\n  startButton.disabled = true;\n  datetimePicker.disabled = true;\n\n  countdownInterval = setInterval(() => {\n    const ms = userSelectedDate.getTime() - Date.now();\n\n    if (ms < 1000) {\n      clearInterval(countdownInterval);\n      datetimePicker.disabled = false;\n\n      iziToast.success({\n        timeout: 4000,\n        title: 'Countdown complete',\n        message: 'Time is up!',\n        titleColor: '#fff',\n        messageColor: '#fff',\n        backgroundColor: '#59A10D',\n        progressBarColor: '#326101',\n        position: 'topRight',\n        icon: 'ðŸŽ‰',\n        titleSize: '16',\n        messageSize: '16',\n      });\n\n      document.querySelector('.timer')?.classList.add('finished');\n      return;\n    }\n\n    const { days, hours, minutes, seconds } = convertMs(ms);\n    updateDisplay({ days, hours, minutes, seconds });\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor((ms % hour) / minute);\n  const seconds = Math.floor((ms % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\nfunction updateDisplay({ days, hours, minutes, seconds }) {\n  timeValuesArray[0].textContent = addLeadingZero(days);\n  timeValuesArray[1].textContent = addLeadingZero(hours);\n  timeValuesArray[2].textContent = addLeadingZero(minutes);\n  timeValuesArray[3].textContent = addLeadingZero(seconds);\n}\n\nfunction addLeadingZero(value) {\n  return String(value).padStart(2, '0');\n}\n"],"names":["startButton","datetimePicker","timeValuesArray","userSelectedDate","countdownInterval","toastErrorConfig","errorSvg","flatpickr","selectedDate","iziToast","onStartCountdown","ms","_a","days","hours","minutes","seconds","convertMs","updateDisplay","addLeadingZero","value"],"mappings":"0IAMA,MAAMA,EAAc,SAAS,cAAc,QAAQ,EAC7CC,EAAiB,SAAS,eAAe,iBAAiB,EAC1DC,EAAkB,SAAS,uBAAuB,OAAO,EAE/D,IAAIC,EAAmB,KACnBC,EAAoB,KAGxB,MAAMC,EAAmB,CACvB,QAAS,IACT,MAAO,QACP,QAAS,qCACT,WAAY,OACZ,aAAc,OACd,gBAAiB,UACjB,iBAAkB,UAClB,QAASC,EACT,SAAU,WACV,UAAW,KACX,gBAAiB,KACjB,YAAa,KACb,kBAAmB,IACrB,EAGAC,EAAUN,EAAgB,CACxB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQ,CAACO,CAAY,EAAG,CACXA,EAAa,QAAS,EAAG,KAAK,IAAG,EACnC,KACPL,EAAmBK,EACnBR,EAAY,SAAW,KAEvBA,EAAY,SAAW,GACvBS,EAAS,MAAMJ,CAAgB,EAElC,CACH,CAAC,EAEDL,EAAY,iBAAiB,QAASU,CAAgB,EAEtD,SAASA,GAAmB,CAC1BV,EAAY,SAAW,GACvBC,EAAe,SAAW,GAE1BG,EAAoB,YAAY,IAAM,OACpC,MAAMO,EAAKR,EAAiB,QAAS,EAAG,KAAK,IAAG,EAEhD,GAAIQ,EAAK,IAAM,CACb,cAAcP,CAAiB,EAC/BH,EAAe,SAAW,GAE1BQ,EAAS,QAAQ,CACf,QAAS,IACT,MAAO,qBACP,QAAS,cACT,WAAY,OACZ,aAAc,OACd,gBAAiB,UACjB,iBAAkB,UAClB,SAAU,WACV,KAAM,KACN,UAAW,KACX,YAAa,IACrB,CAAO,GAEDG,EAAA,SAAS,cAAc,QAAQ,IAA/B,MAAAA,EAAkC,UAAU,IAAI,YAChD,MACD,CAED,KAAM,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYC,EAAUN,CAAE,EACtDO,EAAc,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAS,CAAA,CAChD,EAAE,GAAI,CACT,CAEA,SAASC,EAAUN,EAAI,CAMrB,MAAME,EAAO,KAAK,MAAMF,EAAK,KAAG,EAC1BG,EAAQ,KAAK,MAAOH,EAAK,MAAO,IAAI,EACpCI,EAAU,KAAK,MAAOJ,EAAK,KAAQ,GAAM,EACzCK,EAAU,KAAK,MAAOL,EAAK,IAAU,GAAM,EAEjD,MAAO,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,SAASE,EAAc,CAAE,KAAAL,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CACxDd,EAAgB,CAAC,EAAE,YAAciB,EAAeN,CAAI,EACpDX,EAAgB,CAAC,EAAE,YAAciB,EAAeL,CAAK,EACrDZ,EAAgB,CAAC,EAAE,YAAciB,EAAeJ,CAAO,EACvDb,EAAgB,CAAC,EAAE,YAAciB,EAAeH,CAAO,CACzD,CAEA,SAASG,EAAeC,EAAO,CAC7B,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC"}